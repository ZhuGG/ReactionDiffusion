<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover"
    />
    <title>La Hyène — Tatouage & Illustration</title>
    <meta
      name="description"
      content="Studio de tatouage La Hyène : flashs prêts à tatouer, projets personnalisés et prise de rendez-vous rapide à Lyon."
    />
    <link rel="preconnect" href="https://fonts.bunny.net" />
    <link
      rel="stylesheet"
      href="https://fonts.bunny.net/css?family=manrope:300,400,500,600,700|playfair-display:400,600"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      :root {
        color-scheme: light;
        --ink: #0f172a;
        --accent: #dc2626;
        --accent-soft: #fca5a5;
        --frost: #ffffffdd;
      }
      * { box-sizing: border-box; }
      body {
        margin: 0;
        min-height: 100vh;
        font-family: 'Manrope', system-ui, -apple-system, 'Segoe UI', sans-serif;
        color: var(--ink);
        background: radial-gradient(circle at 15% 20%, rgba(252, 231, 233, 0.6), transparent 35%),
          radial-gradient(circle at 80% 10%, rgba(59, 130, 246, 0.18), transparent 45%),
          radial-gradient(circle at 50% 95%, rgba(220, 38, 38, 0.12), transparent 35%),
          linear-gradient(180deg, #fdf2f8 0%, #f8fafc 55%, #f1f5f9 100%);
      }
      .shell { max-width: 1200px; margin: 0 auto; padding: 0 1.5rem; position: relative; z-index: 1; }
      .glass { backdrop-filter: blur(18px); background: linear-gradient(145deg, rgba(255, 255, 255, 0.95), rgba(244, 244, 245, 0.86)); border: 1px solid rgba(148, 163, 184, 0.28); box-shadow: 0 18px 60px rgba(15, 23, 42, 0.12); }
      .pill { border-radius: 999px; border: 1px solid rgba(15, 23, 42, 0.08); background: linear-gradient(120deg, #fff, #f8fafc); }
      .btn { transition: transform .16s ease, box-shadow .16s ease; box-shadow: 0 10px 30px rgba(15, 23, 42, 0.08); }
      .btn:hover { transform: translateY(-2px); box-shadow: 0 18px 40px rgba(220, 38, 38, 0.16); }
      .blur-bubble { position: absolute; border-radius: 999px; filter: blur(60px); opacity: .7; pointer-events: none; }
      .grain { position: fixed; inset: 0; pointer-events: none; opacity: .08; background-image: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"220\" height=\"220\"><filter id=\"n\"><feTurbulence type=\"fractalNoise\" baseFrequency=\"0.9\" numOctaves=\"3\" stitchTiles=\"stitch\"/><feColorMatrix type=\"saturate\" values=\"0\"/></filter><rect width=\"100%\" height=\"100%\" filter=\"url(%23n)\" opacity=\"0.55\"/></svg>'); mix-blend-mode: soft-light; animation: grainShift 18s steps(8) infinite; z-index: 0; }
      @keyframes grainShift { 0% { transform: translate3d(0,0,0); } 100% { transform: translate3d(-12%, 6%, 0); } }
      .section-title { display: inline-flex; align-items: center; gap: .6rem; font-weight: 800; font-size: clamp(1.5rem, 3vw, 2rem); }
      .section-title::after { content: ""; display: block; width: 48px; height: 3px; border-radius: 999px; background: linear-gradient(90deg, var(--accent), transparent); }
      .tag { letter-spacing: 0.4em; text-transform: uppercase; font-size: .65rem; }
      .toast-stack { position: fixed; inset-inline: 0; bottom: 1rem; display: grid; justify-items: center; gap: .5rem; padding: 0 1rem; z-index: 50; pointer-events: none; }
      .toast { background: rgba(15, 23, 42, 0.92); color: #fff; border-radius: 999px; padding: .7rem 1rem; font-weight: 700; display: inline-flex; align-items: center; gap: .5rem; transform: translateY(8px); opacity: 0; transition: transform .2s ease, opacity .2s ease; box-shadow: 0 18px 40px rgba(15, 23, 42, .24); }
      .toast[data-visible="true"] { transform: translateY(0); opacity: 1; }
      .toast[data-tone="success"] { background: rgba(22, 163, 74, .92); }
      .toast[data-tone="error"] { background: rgba(220, 38, 38, .92); }
      .flash-lightbox { position: fixed; inset: 0; display: none; align-items: center; justify-content: center; background: rgba(15, 23, 42, 0.82); backdrop-filter: blur(12px); padding: 1.5rem; z-index: 40; }
      .flash-lightbox[data-open="true"] { display: flex; }
      .flash-lightbox__img { max-width: min(100%, 960px); max-height: 85vh; border-radius: 18px; border: 1px solid rgba(255, 255, 255, 0.25); box-shadow: 0 28px 60px rgba(0, 0, 0, 0.35); touch-action: none; transform-origin: center center; transition: transform .18s ease; }
      .flash-lightbox__close { position: absolute; top: 1.25rem; right: 1.25rem; }
      @media (min-width: 768px) { header nav a { font-size: 0.95rem; } }
    </style>
  </head>
  <body class="antialiased">
    <div class="grain" aria-hidden="true"></div>
    <header class="sticky top-0 z-30 bg-white/80 backdrop-blur border-b border-white/60 shadow-sm">
      <div class="shell flex items-center gap-4 py-3">
        <a href="#top" class="pill px-2 py-1 flex items-center gap-3 text-sm font-semibold text-ink">
          <span class="h-12 w-12 rounded-full bg-white border border-slate-200 shadow flex items-center justify-center overflow-hidden">
            <img src="assets/img/Logo_illu_hyene" alt="Logo La Hyène" class="h-11 w-11 object-contain" loading="lazy" decoding="async" />
          </span>
          <span class="flex flex-col leading-tight">
            <span class="text-xs uppercase tracking-[0.35em] text-rose-500">La Hyène</span>
            <strong class="text-base">Tatouage · Lyon 6e</strong>
          </span>
        </a>
        <nav class="ml-auto flex items-center gap-2 sm:gap-3">
          <a href="#flash" class="pill btn px-4 py-2 text-xs sm:text-sm font-semibold text-ink">Planche</a>
          <a href="#booking" class="pill btn px-4 py-2 text-xs sm:text-sm font-semibold text-ink">Réserver</a>
          <a href="https://www.instagram.com/axllahyene" target="_blank" rel="noopener" class="pill btn bg-ink text-white px-4 py-2 text-xs sm:text-sm font-semibold">Instagram</a>
        </nav>
      </div>
    </header>

    <main id="top" class="space-y-20 pb-16">
      <section class="relative pt-12 sm:pt-16">
        <div class="blur-bubble bg-rose-200/60 h-72 w-72 -left-24 -top-16" aria-hidden="true"></div>
        <div class="blur-bubble bg-sky-200/50 h-80 w-80 right-[-6rem] top-24" aria-hidden="true"></div>
        <div class="shell grid lg:grid-cols-[1.25fr_1fr] gap-10 items-center">
          <div class="space-y-6">
            <div class="pill inline-flex items-center gap-2 px-3 py-1 shadow text-xs font-bold uppercase tracking-[0.35em] text-rose-500">Studio privé</div>
            <p class="text-2xl sm:text-3xl font-light italic text-transparent bg-clip-text bg-gradient-to-r from-rose-500 via-red-500 to-indigo-500">Tatouage & illustration par Axl</p>
            <h1 class="text-4xl sm:text-5xl font-semibold leading-tight">Une page claire pour réserver, découvrir et venir sereinement.</h1>
            <p class="text-lg text-slate-700 max-w-xl">Flashs uniques, accompagnement doux et respectueux de toutes les peaux. Choisis un motif, prépare ton message, ou écris pour imaginer ensemble ta pièce.</p>
            <div class="flex flex-wrap gap-3">
              <a href="#flash" class="pill btn px-5 py-3 font-bold text-ink">Voir les flashs</a>
              <a href="#booking" class="pill btn px-5 py-3 font-bold bg-ink text-white">Réserver un créneau</a>
              <a href="https://www.instagram.com/axllahyene" target="_blank" rel="noopener" class="pill btn px-5 py-3 font-bold text-ink">Portfolio Instagram</a>
            </div>
            <div class="grid sm:grid-cols-2 gap-4">
              <div class="glass rounded-2xl p-4">
                <p class="tag text-rose-500">Flashs</p>
                <p class="text-sm text-slate-700 mt-1">Planche à jour · Numéro unique par tatouage · DM rapide conseillé.</p>
              </div>
              <div class="glass rounded-2xl p-4">
                <p class="tag text-sky-500">Ambiance</p>
                <p class="text-sm text-slate-700 mt-1">Studio lumineux, playlist chill, attention à ton confort et à ta peau.</p>
              </div>
            </div>
          </div>
          <div class="relative">
            <div class="glass rounded-[28px] overflow-hidden p-2">
              <div class="relative overflow-hidden rounded-[22px]">
                <div class="absolute inset-0 bg-gradient-to-tr from-white/60 via-transparent to-rose-100/40" aria-hidden="true"></div>
                <img src="assets/img/Illustration_phare" alt="Illustration phare du studio" class="w-full h-full object-cover aspect-[4/5]" loading="lazy" decoding="async" />
              </div>
              <div class="flex items-center justify-between mt-4 px-3 pb-2 text-sm text-slate-600">
                <div>
                  <p class="font-semibold text-slate-900">Studio GOLDENLINE · Brotteaux</p>
                  <p class="text-xs">Accueil sur rendez-vous, mardi → samedi.</p>
                </div>
                <span class="pill px-3 py-1 text-xs font-semibold text-rose-600">Lyon 6e</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="links" class="relative">
        <div class="blur-bubble bg-white h-32 w-32 left-6 -top-10" aria-hidden="true"></div>
        <div class="shell">
          <div class="glass rounded-3xl p-6 sm:p-8 shadow-lg">
            <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
              <div>
                <h2 class="section-title">Accès direct</h2>
                <p class="text-slate-600 mt-2">Retrouve en un geste la planche, le formulaire mail, et les infos pratiques.</p>
              </div>
              <p class="tag text-slate-500">Navigation rapide</p>
            </div>
            <div class="mt-6 grid sm:grid-cols-2 lg:grid-cols-4 gap-3">
              <a href="#booking" class="pill btn px-4 py-3 text-center font-bold text-ink">Réserver un flash</a>
              <a href="https://www.instagram.com/axllahyene" target="_blank" rel="noopener" class="pill btn px-4 py-3 text-center font-bold text-ink">Instagram @axllahyene</a>
              <a href="#flash" class="pill btn px-4 py-3 text-center font-bold text-ink">Voir la planche</a>
              <a id="mailtoLinkPrimary" href="mailto:bonjour@lahyene.art" class="pill btn px-4 py-3 text-center font-bold text-ink">Écrire un email</a>
            </div>
          </div>
        </div>
      </section>

      <section id="flash" class="relative">
        <div class="shell space-y-6">
          <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-4">
            <div class="space-y-2">
              <h2 class="section-title">Flashs disponibles</h2>
              <p class="text-slate-600 max-w-2xl">Chaque numéro est tatoué une seule fois. Sélectionne la planche pour zoomer et copie un message prêt à envoyer.</p>
              <p id="flashPrefill" class="hidden text-sm font-semibold text-rose-600">Flash n°<span id="flashPrefillNumber"></span> prérempli dans votre message ✨</p>
            </div>
            <div class="text-xs uppercase tracking-[0.24em] text-slate-500">Planche du <span id="board-date">JJ/MM/AAAA</span></div>
          </div>

          <div class="grid lg:grid-cols-[minmax(0,1.2fr)_minmax(0,0.8fr)] gap-6 items-start">
            <figure class="glass rounded-3xl overflow-hidden shadow-xl border border-white/60" role="group" aria-labelledby="flash-board-caption">
              <button type="button" class="relative w-full h-full" data-flash-src="assets/img/flash/planche-flash-complete.jpg" data-flash-alt="Planche complète de flashs disponibles" aria-label="Ouvrir la planche de flashs">
                <div class="absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/10" aria-hidden="true"></div>
                <img src="assets/img/Plancheflashs" alt="Planche complète de flashs" class="w-full h-full object-cover" loading="lazy" decoding="async" />
              </button>
              <figcaption id="flash-board-caption" class="px-5 py-3 bg-white/80 text-sm text-slate-600">Clique pour afficher la planche en grand.</figcaption>
            </figure>

            <div class="grid gap-4">
              <div class="glass rounded-2xl p-5">
                <p class="tag text-rose-500">Réserver</p>
                <p class="mt-2 text-sm text-slate-700">Envoie un DM ou un email avec le numéro du flash, l’emplacement et tes disponibilités.</p>
                <div class="flex flex-wrap gap-2 mt-4">
                  <button id="dmBtn" type="button" class="pill btn px-4 py-2 font-bold bg-ink text-white">DM Instagram</button>
                  <button id="mailBtn" type="button" class="pill btn px-4 py-2 font-bold text-ink">Ouvrir l’email</button>
                  <button id="copyMsg" type="button" class="pill btn px-4 py-2 font-bold text-ink">Copier le message</button>
                </div>
              </div>
              <div class="glass rounded-2xl p-5 space-y-3">
                <p class="tag text-sky-500">Checklist mail</p>
                <ul class="text-sm text-slate-700 list-disc list-inside space-y-1">
                  <li>Numéro du flash ou brève description</li>
                  <li>Zone à tatouer & taille souhaitée</li>
                  <li>Disponibilités et contraintes</li>
                  <li>Prénom, pronoms, infos confort</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="booking" class="relative">
        <div class="shell grid lg:grid-cols-2 gap-8 items-start">
          <div class="glass rounded-3xl p-6 sm:p-8 space-y-4">
            <div class="flex items-center gap-2">
              <span class="h-2 w-2 rounded-full bg-rose-500"></span>
              <h3 class="text-2xl font-bold">Prendre rendez-vous</h3>
            </div>
            <p class="text-slate-700">DM conseillé pour une réponse rapide. Email possible avec toutes les infos utiles pour ton confort.</p>
            <ol class="space-y-3 text-sm text-slate-700">
              <li class="flex gap-3 items-start"><span class="pill px-2 py-1 text-xs font-bold bg-rose-500/10 text-rose-700">1</span>Choisis un flash ou décris ton idée.</li>
              <li class="flex gap-3 items-start"><span class="pill px-2 py-1 text-xs font-bold bg-rose-500/10 text-rose-700">2</span>Indique l’emplacement, la taille et tes disponibilités.</li>
              <li class="flex gap-3 items-start"><span class="pill px-2 py-1 text-xs font-bold bg-rose-500/10 text-rose-700">3</span>Ajoute tes pronoms, sensibilités ou besoins d’accessibilité.</li>
            </ol>
            <div class="flex flex-wrap gap-3">
              <a href="https://www.instagram.com/axllahyene" target="_blank" rel="noopener" class="pill btn px-4 py-2 font-bold text-ink">DM Instagram</a>
              <a id="mailtoLink" href="mailto:bonjour@lahyene.art" class="pill btn px-4 py-2 font-bold bg-ink text-white">Envoyer un email</a>
            </div>
          </div>

          <div class="glass rounded-3xl p-6 sm:p-8 space-y-4">
            <div class="flex items-center gap-2">
              <span class="h-2 w-2 rounded-full bg-sky-500"></span>
              <h3 class="text-2xl font-bold">Localisation</h3>
            </div>
            <p class="text-sm text-slate-700">GOLDENLINE — Lyon 6e · Quartier Brotteaux / Masséna</p>
            <div class="rounded-2xl overflow-hidden border border-white/70 shadow-lg aspect-[4/3]">
              <iframe
                title="Plan du studio"
                src="https://www.openstreetmap.org/export/embed.html?bbox=4.841%2C45.766%2C4.857%2C45.775&layer=mapnik&marker=45.7695%2C4.849"
                class="w-full h-full border-0"
                loading="lazy"
                referrerpolicy="no-referrer"
              ></iframe>
            </div>
            <a
              href="https://www.google.com/maps/search/?api=1&query=45.7695,4.849"
              target="_blank"
              rel="noopener"
              class="inline-flex items-center text-sm font-semibold text-rose-600 hover:text-rose-700"
            >
              Ouvrir dans Google Maps
            </a>
            <p class="text-xs text-slate-500">À 5 minutes du métro Brotteaux — accueil sur rendez-vous uniquement.</p>
          </div>
        </div>
      </section>

      <section id="contact" class="relative">
        <div class="shell grid lg:grid-cols-2 gap-8">
          <div class="glass rounded-3xl p-6 sm:p-8 space-y-3">
            <h3 class="text-2xl font-bold">Contact</h3>
            <ul class="space-y-2 text-slate-700">
              <li><span class="font-semibold text-slate-900">Email :</span> <a href="mailto:bonjour@lahyene.art" class="text-rose-600 font-semibold">bonjour@lahyene.art</a></li>
              <li><span class="font-semibold text-slate-900">Instagram :</span> <a href="https://www.instagram.com/axllahyene" target="_blank" rel="noopener" class="text-rose-600 font-semibold">@axllahyene</a></li>
              <li><span class="font-semibold text-slate-900">Horaires :</span> Sur rendez-vous, mardi → samedi</li>
            </ul>
          </div>
          <div class="glass rounded-3xl p-6 sm:p-8 space-y-3">
            <h3 class="text-2xl font-bold">Infos & hygiène</h3>
            <ul class="space-y-2 text-sm text-slate-700">
              <li>Matériel stérile à usage unique, hygiène irréprochable.</li>
              <li>Patch test possible pour peaux sensibles (sur demande).</li>
              <li>Respect des peaux noires et mates : pigments adaptés & conseils cicatrisation.</li>
              <li>Accessibilité : ascenseur, table ajustable, pauses possibles à tout moment.</li>
            </ul>
          </div>
        </div>
      </section>
    </main>

    <div class="mobile-cta md:hidden fixed inset-x-0 bottom-0 px-4 pb-4 pt-3 bg-gradient-to-t from-white via-white/90 to-transparent backdrop-blur-lg z-20 border-t border-white/80" data-hidden="false">
      <a href="#booking" class="pill btn w-full text-center font-bold bg-ink text-white" data-cta-mobile>Prendre RDV</a>
    </div>

    <div class="toast-stack" id="toastStack" aria-live="polite" aria-atomic="true"></div>

    <div class="flash-lightbox" id="flashLightbox" role="dialog" aria-modal="true" aria-labelledby="flashLightboxCaption" tabindex="-1">
      <button type="button" class="pill btn flash-lightbox__close bg-ink text-white" id="flashLightboxClose">Fermer</button>
      <figure class="relative max-w-full text-white text-sm text-center space-y-3">
        <img src="" alt="" id="flashLightboxImg" class="flash-lightbox__img" decoding="async" loading="lazy" />
        <figcaption id="flashLightboxCaption" class="opacity-85"></figcaption>
      </figure>
    </div>

    <footer class="border-t border-white/50 bg-white/80 backdrop-blur">
      <div class="shell py-8 flex flex-col md:flex-row items-center justify-between gap-4 text-sm text-slate-600">
        <p>© <span id="year"></span> La Hyène — Axl Mili</p>
        <p class="text-xs text-slate-500">Page refondue · Navigation claire · DM/Email en 1 clic</p>
      </div>
    </footer>

    <script>
      const $ = (selector, scope = document) => scope.querySelector(selector);

      const yearSpan = $('#year');
      if (yearSpan) yearSpan.textContent = new Date().getFullYear();

      const boardDateElement = $('#board-date');
      if (boardDateElement) {
        const formatter = new Intl.DateTimeFormat('fr-FR', { day: '2-digit', month: '2-digit', year: 'numeric' });
        boardDateElement.textContent = formatter.format(new Date());
      }

      const toastStack = $('#toastStack');
      const showToast = (message, tone = 'neutral', duration = 2600) => {
        if (!toastStack) return;
        const toast = document.createElement('div');
        toast.className = 'toast';
        toast.textContent = message;
        toast.dataset.visible = 'false';
        toast.setAttribute('role', 'status');
        if (tone !== 'neutral') toast.dataset.tone = tone;
        toastStack.appendChild(toast);
        requestAnimationFrame(() => { toast.dataset.visible = 'true'; });
        const hide = () => { toast.dataset.visible = 'false'; setTimeout(() => toast.remove(), 220); };
        setTimeout(hide, duration);
      };

      const params = new URLSearchParams(window.location.search);
      const flashNumberParam = params.get('n');
      const flashPrefill = $('#flashPrefill');
      const flashPrefillNumber = $('#flashPrefillNumber');
      if (flashNumberParam && flashPrefill && flashPrefillNumber) {
        flashPrefillNumber.textContent = flashNumberParam;
        flashPrefill.classList.remove('hidden');
      }

      const buildMessageTemplate = () => {
        const numberLine = flashNumberParam ? `Flash n°${flashNumberParam}` : '___';
        return `Bonjour La Hyène,\n\nJe souhaiterais réserver un flash. Voici les informations :\n• Numéro du flash ou idée : ${numberLine}\n• Emplacement : ___\n• Taille approximative : ___\n• Disponibilités : ___\n• Besoins spécifiques : ___\n\nMerci !`;
      };

      const openMail = () => {
        const subject = encodeURIComponent('Demande de réservation — La Hyène');
        const body = encodeURIComponent(buildMessageTemplate());
        window.location.href = `mailto:bonjour@lahyene.art?subject=${subject}&body=${body}`;
      };

      const attachMailHandler = (element) => {
        if (!element) return;
        element.addEventListener('click', (event) => {
          event.preventDefault();
          openMail();
        });
      };

      attachMailHandler($('#mailBtn'));
      attachMailHandler($('#mailtoLink'));
      attachMailHandler($('#mailtoLinkPrimary'));

      const dmBtn = $('#dmBtn');
      if (dmBtn) dmBtn.addEventListener('click', () => window.open('https://www.instagram.com/axllahyene', '_blank', 'noopener'));

      const copyBtn = $('#copyMsg');
      if (copyBtn) {
        const fallbackCopy = (text) => {
          const textarea = document.createElement('textarea');
          textarea.value = text;
          textarea.setAttribute('readonly', '');
          textarea.style.position = 'absolute';
          textarea.style.left = '-9999px';
          document.body.appendChild(textarea);
          textarea.select();
          document.execCommand('copy');
          document.body.removeChild(textarea);
        };

        copyBtn.addEventListener('click', async () => {
          const message = buildMessageTemplate();
          try {
            if (navigator.clipboard?.writeText) {
              await navigator.clipboard.writeText(message);
            } else {
              fallbackCopy(message);
            }
            showToast('Message copié ✨', 'success');
          } catch (error) {
            showToast('Impossible de copier — sélectionne le texte manuellement.', 'error');
          }
        });
      }

      const flashLightbox = $('#flashLightbox');
      const flashLightboxImg = $('#flashLightboxImg');
      const flashLightboxCaption = $('#flashLightboxCaption');
      const flashLightboxClose = $('#flashLightboxClose');
      let lightboxScrollPosition = 0;

      const pointers = new Map();
      let initialDistance = null;
      let initialScale = 1;
      let lastCenter = null;
      let scale = 1;
      const translate = { x: 0, y: 0 };

      const clamp = (value, min, max) => Math.min(Math.max(value, min), max);

      const clampTranslation = () => {
        if (!flashLightboxImg) return;
        const width = flashLightboxImg.clientWidth;
        const height = flashLightboxImg.clientHeight;
        const limitX = width ? (width * (scale - 1)) / 2 : 0;
        const limitY = height ? (height * (scale - 1)) / 2 : 0;
        translate.x = clamp(translate.x, -limitX, limitX);
        translate.y = clamp(translate.y, -limitY, limitY);
      };

      const updateTransform = () => {
        if (!flashLightboxImg) return;
        clampTranslation();
        flashLightboxImg.style.transform = `translate(${translate.x}px, ${translate.y}px) scale(${scale})`;
      };

      const resetTransform = () => {
        scale = 1;
        translate.x = 0;
        translate.y = 0;
        initialDistance = null;
        lastCenter = null;
        updateTransform();
      };

      const setBodyScrollLocked = (locked) => {
        if (locked) {
          lightboxScrollPosition = window.scrollY;
          document.body.style.top = `-${lightboxScrollPosition}px`;
          document.body.style.position = 'fixed';
          document.body.style.width = '100%';
          document.body.style.overflow = 'hidden';
        } else {
          document.body.style.position = '';
          document.body.style.top = '';
          document.body.style.width = '';
          document.body.style.overflow = '';
          window.scrollTo({ top: lightboxScrollPosition });
        }
      };

      const openLightbox = (src, alt) => {
        if (!flashLightbox || !flashLightboxImg) return;
        flashLightboxImg.src = src;
        flashLightboxImg.alt = alt;
        if (flashLightboxCaption) flashLightboxCaption.textContent = alt;
        flashLightbox.dataset.open = 'true';
        setBodyScrollLocked(true);
        requestAnimationFrame(() => {
          resetTransform();
          flashLightbox?.focus?.();
          flashLightboxClose?.focus();
        });
      };

      const closeLightbox = () => {
        if (!flashLightbox) return;
        flashLightbox.dataset.open = 'false';
        setBodyScrollLocked(false);
        resetTransform();
      };

      if (flashLightboxClose) flashLightboxClose.addEventListener('click', () => closeLightbox());

      if (flashLightbox) {
        flashLightbox.addEventListener('click', (event) => {
          if (event.target === flashLightbox) closeLightbox();
        });

        flashLightbox.addEventListener('keyup', (event) => {
          if (event.key === 'Escape') closeLightbox();
        });
      }

      const getDistance = ([first, second]) => Math.hypot(second.x - first.x, second.y - first.y);
      const getCenter = ([first, second]) => ({ x: (first.x + second.x) / 2, y: (first.y + second.y) / 2 });

      if (flashLightboxImg) {
        flashLightboxImg.addEventListener('pointerdown', (event) => {
          flashLightboxImg.setPointerCapture(event.pointerId);
          pointers.set(event.pointerId, { x: event.clientX, y: event.clientY });
          if (pointers.size === 2) {
            const values = Array.from(pointers.values());
            initialDistance = getDistance(values);
            initialScale = scale;
            lastCenter = getCenter(values);
          }
        });

        flashLightboxImg.addEventListener('pointermove', (event) => {
          if (!pointers.has(event.pointerId)) return;
          const previous = pointers.get(event.pointerId);
          pointers.set(event.pointerId, { x: event.clientX, y: event.clientY });

          if (pointers.size === 2) {
            const values = Array.from(pointers.values());
            const distance = getDistance(values);
            if (initialDistance) {
              const relativeScale = distance / initialDistance;
              scale = clamp(initialScale * relativeScale, 1, 3.5);
            }
            const center = getCenter(values);
            if (lastCenter) {
              translate.x += center.x - lastCenter.x;
              translate.y += center.y - lastCenter.y;
            }
            lastCenter = center;
          } else if (pointers.size === 1 && scale > 1 && previous) {
            translate.x += event.clientX - previous.x;
            translate.y += event.clientY - previous.y;
          }

          updateTransform();
        });

        const pointerCleanup = (event) => {
          pointers.delete(event.pointerId);
          if (pointers.size < 2) {
            initialDistance = null;
            lastCenter = null;
            initialScale = scale;
          }
          if (pointers.size === 0 && scale === 1) resetTransform();
        };

        flashLightboxImg.addEventListener('pointerup', pointerCleanup);
        flashLightboxImg.addEventListener('pointercancel', pointerCleanup);
        flashLightboxImg.addEventListener('pointerout', (event) => {
          if (!flashLightbox?.contains(event.relatedTarget)) pointerCleanup(event);
        });

        flashLightboxImg.addEventListener('wheel', (event) => {
          event.preventDefault();
          const delta = event.deltaY;
          scale = clamp(delta > 0 ? scale - 0.15 : scale + 0.15, 1, 3.5);
          updateTransform();
        }, { passive: false });

        let lastTap = 0;
        const handleZoomToggle = (clientX, clientY) => {
          if (!flashLightboxImg) return;
          const rect = flashLightboxImg.getBoundingClientRect();
          if (scale > 1.1) {
            scale = 1;
            translate.x = 0;
            translate.y = 0;
          } else {
            scale = 2;
            translate.x -= (clientX - (rect.left + rect.width / 2)) / scale;
            translate.y -= (clientY - (rect.top + rect.height / 2)) / scale;
          }
          updateTransform();
        };

        flashLightboxImg.addEventListener('click', (event) => {
          const now = Date.now();
          if (now - lastTap < 300) handleZoomToggle(event.clientX, event.clientY);
          lastTap = now;
        });

        flashLightboxImg.addEventListener('dblclick', (event) => {
          event.preventDefault();
          handleZoomToggle(event.clientX, event.clientY);
        });
      }

      document.querySelectorAll('[data-flash-src]').forEach((button) => {
        button.addEventListener('click', () => {
          const src = button.getAttribute('data-flash-src');
          const alt = button.getAttribute('data-flash-alt') || 'Planche de flashs';
          if (src) openLightbox(src, alt);
        });
      });

      const mobileCta = document.querySelector('.mobile-cta');
      const bookingSection = $('#booking');
      if (mobileCta && bookingSection && 'IntersectionObserver' in window) {
        const observer = new IntersectionObserver((entries) => {
          entries.forEach((entry) => {
            mobileCta.dataset.hidden = entry.isIntersecting ? 'true' : 'false';
          });
        }, { rootMargin: '0px 0px -35% 0px' });
        observer.observe(bookingSection);
      }
    </script>
  </body>
</html>
